{% assign url = page.url %}
{% if url contains 'blog' or url contains 'projects' %}
<script type="text/x-mathjax-config" defer>
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ['\\(','\\)'] ],
            displayMath: [ ['$$','$$'], ['\\[','\\]'] ],
            processEscapes: true
        },
        TeX: { equationNumbers: { autoNumber: "AMS" } }
    });
</script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_HTML-full" defer></script>
{% endif %}
{% if site.sidebar.display == "push" %}
<script type="text/javascript" src="{{site.baseurl}}/public/js/sidebar/push.js" defer></script>
{% else %}
<script type="text/javascript" src="{{site.baseurl}}/public/js/sidebar/fixed.js" defer></script>
{% endif %}
{% comment %}
<script type="text/javascript" src="{{site.baseurl}}/public/js/sidebar/open-close.js" defer></script>
{% endcomment %}
{% if url contains '/search' %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/2.3.2/lunr.min.js" defer></script>
{% endif %}
{% if url contains 'blog/search' and site.environment == "production" and site.build == "gulp" %}
<script type="text/javascript" src="{{site.baseurl}}/public/js/lunr/blog.js" defer></script>
{% elsif url contains 'blog/search' %}
<script type="text/javascript" src="{{site.baseurl}}/public/js/lunr/posts.js" defer></script>
<script type="text/javascript" src="{{site.baseurl}}/public/js/lunr/search-blogs.js" defer></script>
{% endif %}
{% if url contains 'projects/search' and site.environment == "production" and site.build == "gulp" %}
<script type="text/javascript" src="{{site.baseurl}}/public/js/lunr/project.js" defer></script>
{% elsif url contains 'projects/search' %}
<script type="text/javascript" src="{{site.baseurl}}/public/js/lunr/projects.js" defer></script>
<script type="text/javascript" src="{{site.baseurl}}/public/js/lunr/search-projects.js" defer></script>
{% endif %}
{% if page.content contains "code" %}
<script type="text/javascript" src="{{site.baseurl}}/public/plugins/prism/prism.min.js" defer></script>
<!--<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.1/clipboard.min.js" defer></script>-->
{% endif %}
{% if site.environment == "production" %}
{% include google-analytics.html %}
{% endif %}
{% if page.toc == true %}
<script>
  var toggle_toc = () =>
  {
    console.log("Toggling TOC");
    let show_hide_toc = document.getElementById("show-hide-toc");
    let blog_toc = document.getElementById("blog-toc");
    let blog_body = document.getElementById("blog-body");
    console.log(show_hide_toc);
    console.log(blog_toc);
    console.log(blog_body);
    blog_toc.classList.toggle("zero-width");
    blog_toc.classList.toggle("visibility-hidden");
    blog_toc.classList.toggle("no-padding");
    blog_body.classList.toggle("full-width");
    blog_body.classList.toggle("no-padding");
    if (blog_toc.classList.contains("zero-width") === false)
    {
      show_hide_toc.innerText = "Hide TOC";
    }
    else
    {
      show_hide_toc.innerText = "Show TOC";
    }
  }
</script>
{% endif %}
<script type="text/javascript">
  /*window.onload = function()
  {*/
  var data =
  {
    "name"         : "{{site.author.name}}",
    "author"       : {"@type":"Person","name":"{{site.author.name}}"},
    "@type"        : "WebSite",
    "url"          : "{{site.url}}{{site.baseurl}}{{page.url}}",
    "headline"     : "Home",
    "dateModified" : "",
    "sameAs"       : ["{{site.author.contact.twitter}}", "{{site.author.contact.facebook}}" , "{{site.author.contact.linkedin}}", "{{site.author.contact.github}}"],
    "@context"     : "http://schema.org"
  }
  var dateModified = document.lastModified;
  console.log(dateModified);
  data.dateModified = dateModified;
  var script = document.createElement('script');
  script.type = "application/ld+json";
  script.innerHTML = JSON.stringify(data);
  console.log(script);
  console.log(document.getElementsByTagName('head')[0]);
  document.getElementsByTagName('head')[0].appendChild(script);
  /*}*/
</script>
<script type="text/javascript" src="{{site.baseurl}}/public/plugins/scrollspy/scrollspy.js"></script>
<script>
  console.log("Calling scrollspy");
  const toc_menu = document.querySelector('#toc-menu');
  const blog_body = document.querySelector('#blog-body');
  const scrollspy = new VanillaScrollspy(toc_menu, blog_body);
  scrollspy.init();
</script>
